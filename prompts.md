# Developer Prompt

지금부터 내 컴퓨터에 해커톤용 Next.js 프로젝트를 설치할 거야.
순서대로 작업을 진행해줘.

**[1. 환경 진단]**
- 먼저 터미널에 `node -v`를 입력해서 Node.js가 설치되어 있는지 확인해줘.
- **만약 Node.js가 없다면:** 작업을 중단하고, "Node.js 설치가 필요합니다. https://nodejs.org 에서 LTS 버전을 설치해주세요."라고 알려줘.
- **설치되어 있다면:** 다음 단계로 넘어가.

**[2. 프로젝트 생성]**
- 현재 폴더에 'world-id-vote'라는 이름으로 Next.js(App Router), TypeScript, Tailwind CSS 프로젝트를 설치해줘.
- 설치가 끝나면, `page.tsx`와 `globals.css`의 내용을 전부 지우고 심플한 "Ready to Hack" 텍스트만 남겨서 초기화해줘.

---

지금부터 너는 **World ID Mini App 전문 개발자** 역할을 맡아줘.
우리는 World App 내부에서 실행되는 **Mini App**을 만들 거야.
따라서 일반 웹용 SDK인 `IDKit`은 절대 사용하지 말고, **`@worldcoin/minikit-js`**를 사용해야 해.

본격적인 개발에 앞서, 아래 제공된 **World ID 공식 기술 문서(LLM 전용)**를 읽고 **Mini App 개발에 필요한 지식**만 골라서 학습해줘.

**[학습 자료: World ID Technical Docs]**
URL: https://docs.world.org/llms-full.txt

**[분석해야 할 핵심 포인트 (Mini App Focus)]**
1. **Library:** `@worldcoin/minikit-js` (React/Next.js 환경)
2. **Initialization:** `MiniKit.install()` 함수를 사용하여 앱을 초기화하는 방법.
3. **Commands:**
   - **`MiniKit.commands.verify`**: 익명 인증(Verification)을 요청하는 명령어 구조.
   - **Payload:** `action`, `signal`, `verification_level` 설정 방법.
4. **Verification Flow:**
   - 미니앱 내부에서 인증 창이 뜨고, 결과를 받는 흐름.

**[요청 사항]**
- 지금은 코드를 작성하지 마.
- 위 문서를 읽고 MiniKit 사용법을 완벽히 이해했다면, **"Mini App(MiniKit) 개발 준비가 되었습니다."** 라고만 짧게 대답해줘.

---

아까 배운 지식을 활용해서 **'익명 투표(Anonymous Vote)'** 앱을 만들어줘.

**[1. 기초 공사]**
- World ID 기능이 우리 앱 안에서 잘 작동하도록, **초기 설정(Initialization)** 코드를 먼저 작성해서 적용해줘.

**[2. 화면 디자인]**
- **컨셉:** '신뢰감 있는 선거 관리 위원회' 느낌 (흰색 배경 + 짙은 파란색 포인트).
- **구성:**
  1. 제목: "제1회 익명 인기투표" (화면 상단 중앙)
  2. 안건 리스트: 아래 2가지 안건을 카드 모양으로 깔끔하게 보여줘.
     - "점심시간 2시간 확대"
     - "주 4일제 도입"
  3. 버튼: 각 안건 카드 오른쪽에 **[투표하기]** 버튼 배치.

**[3. 핵심 기능: 투표 버튼]**
- 사용자가 [투표하기] 버튼을 누르면, **World ID 지갑을 열어서 인증을 요청**해줘.
- **설정 값 (Payload):**
  - **인증 레벨:** 내 폰으로 테스트할 거니까 **"device"** 레벨로 설정해줘. (★제일 중요!)
  - **신호(Signal):** 사용자가 선택한 안건 제목을 넣어줘.
  - **앱 ID:** "app_" 인데 유출되지 않게 해줘.

**[4. 결과 처리]**
- 인증에 성공하면 화면에 "✅ 인증 성공! 소중한 1표가 행사되었습니다."라는 알림창을 띄워줘.

---

이제 내가 만든 앱을 **내 스마트폰에서 직접 테스트**하고 싶어.
**Tunnelmole**이라는 도구를 사용해서 내 로컬 서버(localhost:3000)를 외부 인터넷과 연결해줘.

**[1. 설치 상태 확인 및 가이드]**
- 먼저 내 컴퓨터에 `tunnelmole`이 설치되어 있는지 확인해줘.
- **만약 설치되어 있지 않다면:**
  - 터미널에서 바로 설치할 수 있는 명령어(`npm install -g tunnelmole`)를 알려주고,
  - 혹시 에러가 날 경우를 대비해 공식 설치 문서 링크(https://github.com/robbie-cahill/tunnelmole-client)도 같이 출력해줘.

**[2. 실행 스크립트 등록 (편의성)]**
- 매번 긴 명령어를 치기 귀찮으니까, `package.json`의 `scripts` 부분에 아래 명령어를 추가해줘.
- **Script 이름:** `"share"`
- **명령어:** `tmole 3000` (Next.js 기본 포트 연결)

**[3. 사용법 안내]**
- 설정이 끝나면, 내가 터미널에 딱 한 단어만 치면 바로 터널이 열리도록 **실행 명령어**를 알려줘.
- 그리고 실행된 후 나오는 **Public URL**을 어떻게 활용해야 하는지(스마트폰에서 접속 등) 간단히 설명해줘.

---

지금 투표 기능은 잘 되는데, **한 사람이 버튼을 여러 번 눌러서 중복 투표**를 할 수 있다는 문제가 있어.

**[1. 질문: 해결책을 찾아줘]**
- 내가 얼핏 듣기로는 **World ID의 'Action' 기능**을 쓰면, 익명성을 유지하면서도 "이 사람이 아까 투표했는지 안 했는지" 알 수 있다던데 맞아?
- 그게 기술적으로 어떻게 가능한지(어떤 값을 확인해야 하는지) 비개발자인 나도 이해하기 쉽게 한 문장으로 설명해줘.

**[2. 실행: 백엔드(서버) 구현해줘]**
- 네 설명이 맞다면, 이제 그 기능을 구현해줘.
- 프론트엔드에서 받은 인증 정보(Payload)를 검사하는 **백엔드 서버(API)**를 만들어야겠지?
- **요구사항:**
  1. 해커톤이니까 복잡한 DB 대신, 그냥 **서버 메모리(변수)**에 투표한 사람의 흔적(Nullifier)을 저장해서 중복을 막아줘.
  2. 이미 투표한 사람이 또 시도하면 "🚫 이미 참여하셨습니다!"라고 에러를 뱉어줘.
  3. 프론트엔드 코드도 수정해서, 이 백엔드 서버에 승인을 받아야만 "투표 성공"이 뜨게 연결해줘.

---

잠깐, 우리가 코드에서 `action: "vote-agenda"`를 사용했잖아.
이거 그냥 코드에만 적으면 되는 거야, 아니면 **Worldcoin Developer Portal**에서 따로 등록해야 하는 거야?

만약 등록해야 한다면, **어떤 메뉴에 들어가서 어떻게 설정해야 하는지** 단계별로 알려줘.
특히 **'Action Name'**과 **'Description'**에는 뭐라고 적는 게 좋은지도 추천해줘.